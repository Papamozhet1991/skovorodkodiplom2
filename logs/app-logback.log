2024-03-04 22:41:22,147 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Neither @ContextConfiguration nor @ContextHierarchy found for test class [ru.netology.skovorodkodiplom.controller.FileControllerTest], using SpringBootContextLoader
2024-03-04 22:41:22,153 INFO [main] org.springframework.test.context.support.AbstractContextLoader: Could not detect default resource locations for test class [ru.netology.skovorodkodiplom.controller.FileControllerTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2024-03-04 22:41:22,154 INFO [main] org.springframework.test.context.support.AnnotationConfigContextLoaderUtils: Could not detect default configuration classes for test class [ru.netology.skovorodkodiplom.controller.FileControllerTest]: FileControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-03-04 22:41:22,326 INFO [main] org.springframework.boot.test.context.SpringBootTestContextBootstrapper: Found @SpringBootConfiguration ru.netology.skovorodkodiplom.GalaxyCloudApplication for test class ru.netology.skovorodkodiplom.controller.FileControllerTest
2024-03-04 22:41:22,404 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2024-03-04 22:41:22,418 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@1bc715b8, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@292d1c71, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@2b491fee, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@3f1c5af9, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1c55f277, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5ddabb18, org.springframework.test.context.transaction.TransactionalTestExecutionListener@3e8f7922, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@63192798, org.springframework.test.context.event.EventPublishingTestExecutionListener@50eca7c6, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@58e6d4b8, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@1de5f0ef, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@376a312c, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@28d6290, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@6ca0256d, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5ef0d29e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@38f57b3d, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@51850751]
2024-03-04 22:41:22,663 INFO [background-preinit] org.hibernate.validator.internal.util.Version: HV000001: Hibernate Validator 6.2.5.Final
2024-03-04 22:41:22,666 INFO [main] org.springframework.boot.StartupInfoLogger: Starting FileControllerTest using Java 17.0.8.1 on DESKTOP-FQJHVEU with PID 22428 (started by Семья in C:\Users\Семья\Desktop\Diplom2\Diplom2)
2024-03-04 22:41:22,666 INFO [main] org.springframework.boot.SpringApplication: No active profile set, falling back to 1 default profile: "default"
2024-03-04 22:41:23,312 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Multiple Spring Data modules found, entering strict repository configuration mode
2024-03-04 22:41:23,314 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2024-03-04 22:41:23,346 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport: Spring Data JDBC - Could not safely identify store assignment for repository candidate interface ru.netology.skovorodkodiplom.repository.FileRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-03-04 22:41:23,347 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport: Spring Data JDBC - Could not safely identify store assignment for repository candidate interface ru.netology.skovorodkodiplom.repository.UserRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-03-04 22:41:23,348 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 29 ms. Found 0 JDBC repository interfaces.
2024-03-04 22:41:23,355 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Multiple Spring Data modules found, entering strict repository configuration mode
2024-03-04 22:41:23,356 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-04 22:41:23,384 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2024-03-04 22:41:23,996 INFO [main] com.zaxxer.hikari.HikariDataSource: HikariPool-1 - Starting...
2024-03-04 22:41:24,239 INFO [main] com.zaxxer.hikari.HikariDataSource: HikariPool-1 - Start completed.
2024-03-04 22:41:24,363 INFO [main] liquibase.logging.core.JavaLogger: Set default schema name to public
2024-03-04 22:41:24,444 INFO [main] liquibase.logging.core.JavaLogger: Successfully acquired change log lock
2024-03-04 22:41:24,511 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221021_1_create_users_table.yaml
2024-03-04 22:41:24,609 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221021_2__create_files_table.yaml
2024-03-04 22:41:24,617 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221025_3__create_user_roles_table.yaml
2024-03-04 22:41:24,621 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221031_4_import_data.sql
2024-03-04 22:41:24,700 INFO [main] liquibase.logging.core.JavaLogger: Reading from public.databasechangelog
2024-03-04 22:41:24,748 INFO [main] liquibase.logging.core.JavaLogger: Successfully released change log lock
2024-03-04 22:41:24,824 INFO [main] org.hibernate.jpa.internal.util.LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-04 22:41:24,871 INFO [main] org.hibernate.Version: HHH000412: Hibernate ORM core version 5.6.11.Final
2024-03-04 22:41:25,000 INFO [main] org.hibernate.annotations.common.reflection.java.JavaReflectionManager: HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-03-04 22:41:25,122 INFO [main] org.hibernate.dialect.Dialect: HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-03-04 22:41:25,812 INFO [main] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-04 22:41:25,820 INFO [main] org.springframework.orm.jpa.AbstractEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-04 22:41:26,291 WARN [main] org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration: 

Using generated security password: 9041ce2c-2255-4c84-902a-532a9ab9752f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-03-04 22:41:26,457 WARN [main] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-04 22:41:27,034 INFO [main] org.springframework.security.web.DefaultSecurityFilterChain: Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@44f6ac4f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@46ee9cfd, org.springframework.security.web.context.SecurityContextPersistenceFilter@2f650dae, org.springframework.security.web.header.HeaderWriterFilter@7c4de811, org.springframework.web.filter.CorsFilter@6b58a0f9, ru.netology.skovorodkodiplom.security.JwtFilter@72b6fa98, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3fe59f84, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@38eafdab, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7b6c3b37, org.springframework.security.web.session.SessionManagementFilter@d98ce13, org.springframework.security.web.access.ExceptionTranslationFilter@6cfe32cd, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4a4352b4]
2024-03-04 22:41:27,672 INFO [main] org.springframework.mock.web.MockServletContext: Initializing Spring TestDispatcherServlet ''
2024-03-04 22:41:27,673 INFO [main] org.springframework.web.servlet.FrameworkServlet: Initializing Servlet ''
2024-03-04 22:41:27,674 INFO [main] org.springframework.web.servlet.FrameworkServlet: Completed initialization in 1 ms
2024-03-04 22:41:27,700 INFO [main] org.springframework.boot.StartupInfoLogger: Started FileControllerTest in 5.247 seconds (JVM running for 6.158)
2024-03-04 22:41:27,892 INFO [main] org.springframework.mock.web.MockServletContext: Initializing Spring TestDispatcherServlet ''
2024-03-04 22:41:27,892 INFO [main] org.springframework.web.servlet.FrameworkServlet: Initializing Servlet ''
2024-03-04 22:41:27,892 INFO [main] org.springframework.web.servlet.FrameworkServlet: Completed initialization in 0 ms
2024-03-04 22:41:28,027 INFO [main] ru.netology.skovorodkodiplom.controller.FileController: Get list all files. Limit: 3
2024-03-04 22:41:28,111 INFO [main] org.springframework.mock.web.MockServletContext: Initializing Spring TestDispatcherServlet ''
2024-03-04 22:41:28,111 INFO [main] org.springframework.web.servlet.FrameworkServlet: Initializing Servlet ''
2024-03-04 22:41:28,111 INFO [main] org.springframework.web.servlet.FrameworkServlet: Completed initialization in 0 ms
2024-03-04 22:41:28,113 INFO [main] ru.netology.skovorodkodiplom.controller.FileController: Delete file from cloud: fileName.txt
2024-03-04 22:41:28,123 INFO [main] org.springframework.mock.web.MockServletContext: Initializing Spring TestDispatcherServlet ''
2024-03-04 22:41:28,123 INFO [main] org.springframework.web.servlet.FrameworkServlet: Initializing Servlet ''
2024-03-04 22:41:28,123 INFO [main] org.springframework.web.servlet.FrameworkServlet: Completed initialization in 0 ms
2024-03-04 22:41:28,124 INFO [main] ru.netology.skovorodkodiplom.controller.FileController: Download file from cloud: fileName.txt
2024-03-04 22:41:28,135 INFO [main] org.springframework.mock.web.MockServletContext: Initializing Spring TestDispatcherServlet ''
2024-03-04 22:41:28,135 INFO [main] org.springframework.web.servlet.FrameworkServlet: Initializing Servlet ''
2024-03-04 22:41:28,136 INFO [main] org.springframework.web.servlet.FrameworkServlet: Completed initialization in 1 ms
2024-03-04 22:41:28,181 INFO [main] ru.netology.skovorodkodiplom.controller.FileController: Edit file name: fileName.txt --> new file name: anyNewName.txt
2024-03-04 22:41:28,190 INFO [main] org.springframework.mock.web.MockServletContext: Initializing Spring TestDispatcherServlet ''
2024-03-04 22:41:28,190 INFO [main] org.springframework.web.servlet.FrameworkServlet: Initializing Servlet ''
2024-03-04 22:41:28,190 INFO [main] org.springframework.web.servlet.FrameworkServlet: Completed initialization in 0 ms
2024-03-04 22:41:28,194 INFO [main] ru.netology.skovorodkodiplom.controller.FileController: Check if file is attached: true
2024-03-04 22:41:28,194 INFO [main] ru.netology.skovorodkodiplom.controller.FileController: Upload file to server: file
2024-03-04 22:41:28,197 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Neither @ContextConfiguration nor @ContextHierarchy found for test class [ru.netology.skovorodkodiplom.controller.UserControllerTest], using SpringBootContextLoader
2024-03-04 22:41:28,198 INFO [main] org.springframework.test.context.support.AbstractContextLoader: Could not detect default resource locations for test class [ru.netology.skovorodkodiplom.controller.UserControllerTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2024-03-04 22:41:28,198 INFO [main] org.springframework.test.context.support.AnnotationConfigContextLoaderUtils: Could not detect default configuration classes for test class [ru.netology.skovorodkodiplom.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-03-04 22:41:28,200 INFO [main] org.springframework.boot.test.context.SpringBootTestContextBootstrapper: Found @SpringBootConfiguration ru.netology.skovorodkodiplom.GalaxyCloudApplication for test class ru.netology.skovorodkodiplom.controller.UserControllerTest
2024-03-04 22:41:28,202 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2024-03-04 22:41:28,202 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@4a0934a8, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@4cf66f73, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@32df1a2a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4fecdf0b, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@4c431e2a, org.springframework.test.context.support.DirtiesContextTestExecutionListener@33317d26, org.springframework.test.context.transaction.TransactionalTestExecutionListener@79753f20, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@50c8a382, org.springframework.test.context.event.EventPublishingTestExecutionListener@4ae45ff, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@3cced001, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6c927487, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@79d31e24, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@f243d5c, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@45a0ba61, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@3a69c81e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5b2ac349, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@754acbad]
2024-03-04 22:41:28,218 INFO [main] org.springframework.mock.web.MockServletContext: Initializing Spring TestDispatcherServlet ''
2024-03-04 22:41:28,219 INFO [main] org.springframework.web.servlet.FrameworkServlet: Initializing Servlet ''
2024-03-04 22:41:28,219 INFO [main] org.springframework.web.servlet.FrameworkServlet: Completed initialization in 0 ms
2024-03-04 22:41:28,235 INFO [main] ru.netology.skovorodkodiplom.controller.UserController: Update user by ID: 2 --> new data: UserDto(login=test@test.com, password=test1234)
2024-03-04 22:41:28,247 INFO [main] org.springframework.mock.web.MockServletContext: Initializing Spring TestDispatcherServlet ''
2024-03-04 22:41:28,247 INFO [main] org.springframework.web.servlet.FrameworkServlet: Initializing Servlet ''
2024-03-04 22:41:28,247 INFO [main] org.springframework.web.servlet.FrameworkServlet: Completed initialization in 0 ms
2024-03-04 22:41:28,248 INFO [main] ru.netology.skovorodkodiplom.controller.UserController: Delete user by ID: 2
2024-03-04 22:41:28,257 INFO [main] org.springframework.mock.web.MockServletContext: Initializing Spring TestDispatcherServlet ''
2024-03-04 22:41:28,258 INFO [main] org.springframework.web.servlet.FrameworkServlet: Initializing Servlet ''
2024-03-04 22:41:28,258 INFO [main] org.springframework.web.servlet.FrameworkServlet: Completed initialization in 0 ms
2024-03-04 22:41:28,263 INFO [main] ru.netology.skovorodkodiplom.controller.UserController: Creating new user: UserDto(login=test@test.com, password=test1234)
2024-03-04 22:41:28,272 INFO [main] org.springframework.mock.web.MockServletContext: Initializing Spring TestDispatcherServlet ''
2024-03-04 22:41:28,273 INFO [main] org.springframework.web.servlet.FrameworkServlet: Initializing Servlet ''
2024-03-04 22:41:28,273 INFO [main] org.springframework.web.servlet.FrameworkServlet: Completed initialization in 0 ms
2024-03-04 22:41:28,274 INFO [main] ru.netology.skovorodkodiplom.controller.UserController: Get user by ID: 2
2024-03-04 22:41:28,278 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Neither @ContextConfiguration nor @ContextHierarchy found for test class [ru.netology.skovorodkodiplom.GalaxyCloudApplicationTests], using SpringBootContextLoader
2024-03-04 22:41:28,279 INFO [main] org.springframework.test.context.support.AbstractContextLoader: Could not detect default resource locations for test class [ru.netology.skovorodkodiplom.GalaxyCloudApplicationTests]: no resource found for suffixes {-context.xml, Context.groovy}.
2024-03-04 22:41:28,279 INFO [main] org.springframework.test.context.support.AnnotationConfigContextLoaderUtils: Could not detect default configuration classes for test class [ru.netology.skovorodkodiplom.GalaxyCloudApplicationTests]: GalaxyCloudApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-03-04 22:41:28,283 INFO [main] org.springframework.boot.test.context.SpringBootTestContextBootstrapper: Found @SpringBootConfiguration ru.netology.skovorodkodiplom.GalaxyCloudApplication for test class ru.netology.skovorodkodiplom.GalaxyCloudApplicationTests
2024-03-04 22:41:28,284 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2024-03-04 22:41:28,284 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@5eb974, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@72f112d1, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@10faebc9, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@3927de0e, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@4c475547, org.springframework.test.context.support.DirtiesContextTestExecutionListener@36dab184, org.springframework.test.context.transaction.TransactionalTestExecutionListener@71b9b035, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@7669d7a2, org.springframework.test.context.event.EventPublishingTestExecutionListener@724945, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@63c78e5e, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@5fc3b20b, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@67afba96, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@7505ef47, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@2a6f3ac7, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@68fe866b, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@729feae8, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@283a5c2b]
2024-03-04 22:41:28,299 INFO [main] org.springframework.boot.StartupInfoLogger: Starting GalaxyCloudApplicationTests using Java 17.0.8.1 on DESKTOP-FQJHVEU with PID 22428 (started by Семья in C:\Users\Семья\Desktop\Diplom2\Diplom2)
2024-03-04 22:41:28,299 INFO [main] org.springframework.boot.SpringApplication: No active profile set, falling back to 1 default profile: "default"
2024-03-04 22:41:28,448 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Multiple Spring Data modules found, entering strict repository configuration mode
2024-03-04 22:41:28,448 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2024-03-04 22:41:28,460 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport: Spring Data JDBC - Could not safely identify store assignment for repository candidate interface ru.netology.skovorodkodiplom.repository.FileRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-03-04 22:41:28,460 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport: Spring Data JDBC - Could not safely identify store assignment for repository candidate interface ru.netology.skovorodkodiplom.repository.UserRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-03-04 22:41:28,461 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 11 ms. Found 0 JDBC repository interfaces.
2024-03-04 22:41:28,463 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Multiple Spring Data modules found, entering strict repository configuration mode
2024-03-04 22:41:28,463 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-04 22:41:28,473 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 9 ms. Found 2 JPA repository interfaces.
2024-03-04 22:41:28,544 INFO [main] com.zaxxer.hikari.HikariDataSource: HikariPool-2 - Starting...
2024-03-04 22:41:28,575 INFO [main] com.zaxxer.hikari.HikariDataSource: HikariPool-2 - Start completed.
2024-03-04 22:41:28,588 INFO [main] liquibase.logging.core.JavaLogger: Set default schema name to public
2024-03-04 22:41:28,628 INFO [main] liquibase.logging.core.JavaLogger: Successfully acquired change log lock
2024-03-04 22:41:28,634 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221021_1_create_users_table.yaml
2024-03-04 22:41:28,638 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221021_2__create_files_table.yaml
2024-03-04 22:41:28,642 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221025_3__create_user_roles_table.yaml
2024-03-04 22:41:28,649 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221031_4_import_data.sql
2024-03-04 22:41:28,691 INFO [main] liquibase.logging.core.JavaLogger: Reading from public.databasechangelog
2024-03-04 22:41:28,724 INFO [main] liquibase.logging.core.JavaLogger: Successfully released change log lock
2024-03-04 22:41:28,748 INFO [main] org.hibernate.jpa.internal.util.LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-04 22:41:28,751 INFO [main] org.hibernate.dialect.Dialect: HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-03-04 22:41:28,789 INFO [main] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-04 22:41:28,789 INFO [main] org.springframework.orm.jpa.AbstractEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-04 22:41:28,931 WARN [main] org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration: 

Using generated security password: 979ec195-741e-4eb2-9994-c28756ab9258

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-03-04 22:41:29,011 WARN [main] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-04 22:41:29,289 INFO [main] org.springframework.security.web.DefaultSecurityFilterChain: Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@522a9876, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@794ffe22, org.springframework.security.web.context.SecurityContextPersistenceFilter@344ab465, org.springframework.security.web.header.HeaderWriterFilter@46b2e0e4, org.springframework.web.filter.CorsFilter@2da16d31, ru.netology.skovorodkodiplom.security.JwtFilter@64d7737c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5ce1b67b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@d05d8c3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@74a15f4, org.springframework.security.web.session.SessionManagementFilter@574ffd63, org.springframework.security.web.access.ExceptionTranslationFilter@67dc7d0, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@30e3544d]
2024-03-04 22:41:29,601 INFO [main] org.springframework.boot.StartupInfoLogger: Started GalaxyCloudApplicationTests in 1.315 seconds (JVM running for 8.058)
2024-03-04 22:41:29,607 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Neither @ContextConfiguration nor @ContextHierarchy found for test class [ru.netology.skovorodkodiplom.service.FileServiceTest], using SpringBootContextLoader
2024-03-04 22:41:29,608 INFO [main] org.springframework.test.context.support.AbstractContextLoader: Could not detect default resource locations for test class [ru.netology.skovorodkodiplom.service.FileServiceTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2024-03-04 22:41:29,608 INFO [main] org.springframework.test.context.support.AnnotationConfigContextLoaderUtils: Could not detect default configuration classes for test class [ru.netology.skovorodkodiplom.service.FileServiceTest]: FileServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-03-04 22:41:29,619 INFO [main] org.springframework.boot.test.context.SpringBootTestContextBootstrapper: Found @SpringBootConfiguration ru.netology.skovorodkodiplom.GalaxyCloudApplication for test class ru.netology.skovorodkodiplom.service.FileServiceTest
2024-03-04 22:41:29,620 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2024-03-04 22:41:29,621 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@22152da0, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@b6c290a, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@5039de18, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@2f96e49f, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@24e5a4e0, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4e2bed0f, org.springframework.test.context.transaction.TransactionalTestExecutionListener@507c33cc, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@48d68740, org.springframework.test.context.event.EventPublishingTestExecutionListener@419df81e, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@50cf26b7, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@611c9d31, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@1d8cfad5, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@337fac72, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@1aacde34, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@1fdc2d45, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@65fc2639, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@2bae0ac8]
2024-03-04 22:41:29,632 INFO [main] org.springframework.boot.StartupInfoLogger: Starting FileServiceTest using Java 17.0.8.1 on DESKTOP-FQJHVEU with PID 22428 (started by Семья in C:\Users\Семья\Desktop\Diplom2\Diplom2)
2024-03-04 22:41:29,632 INFO [main] org.springframework.boot.SpringApplication: No active profile set, falling back to 1 default profile: "default"
2024-03-04 22:41:29,772 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Multiple Spring Data modules found, entering strict repository configuration mode
2024-03-04 22:41:29,773 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2024-03-04 22:41:29,779 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport: Spring Data JDBC - Could not safely identify store assignment for repository candidate interface ru.netology.skovorodkodiplom.repository.FileRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-03-04 22:41:29,780 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport: Spring Data JDBC - Could not safely identify store assignment for repository candidate interface ru.netology.skovorodkodiplom.repository.UserRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-03-04 22:41:29,780 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 7 ms. Found 0 JDBC repository interfaces.
2024-03-04 22:41:29,782 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Multiple Spring Data modules found, entering strict repository configuration mode
2024-03-04 22:41:29,782 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-04 22:41:29,790 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 8 ms. Found 2 JPA repository interfaces.
2024-03-04 22:41:29,910 INFO [main] com.zaxxer.hikari.HikariDataSource: HikariPool-3 - Starting...
2024-03-04 22:41:29,922 INFO [main] com.zaxxer.hikari.HikariDataSource: HikariPool-3 - Start completed.
2024-03-04 22:41:29,930 INFO [main] liquibase.logging.core.JavaLogger: Set default schema name to public
2024-03-04 22:41:29,955 INFO [main] liquibase.logging.core.JavaLogger: Successfully acquired change log lock
2024-03-04 22:41:29,960 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221021_1_create_users_table.yaml
2024-03-04 22:41:29,962 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221021_2__create_files_table.yaml
2024-03-04 22:41:29,964 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221025_3__create_user_roles_table.yaml
2024-03-04 22:41:29,965 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221031_4_import_data.sql
2024-03-04 22:41:30,000 INFO [main] liquibase.logging.core.JavaLogger: Reading from public.databasechangelog
2024-03-04 22:41:30,028 INFO [main] liquibase.logging.core.JavaLogger: Successfully released change log lock
2024-03-04 22:41:30,047 INFO [main] org.hibernate.jpa.internal.util.LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-04 22:41:30,051 INFO [main] org.hibernate.dialect.Dialect: HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-03-04 22:41:30,080 INFO [main] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-04 22:41:30,080 INFO [main] org.springframework.orm.jpa.AbstractEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-04 22:41:30,168 WARN [main] org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration: 

Using generated security password: 0e595956-ad22-4554-b893-a8ef4b7a12f1

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-03-04 22:41:30,229 WARN [main] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-04 22:41:30,381 INFO [main] org.springframework.security.web.DefaultSecurityFilterChain: Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@bbe07e5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7c089fbc, org.springframework.security.web.context.SecurityContextPersistenceFilter@67a2fb00, org.springframework.security.web.header.HeaderWriterFilter@67620d80, org.springframework.web.filter.CorsFilter@1e5259c0, ru.netology.skovorodkodiplom.security.JwtFilter@49f8b57d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6145981c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@16bc97b9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3b4aeacd, org.springframework.security.web.session.SessionManagementFilter@1c63aa5d, org.springframework.security.web.access.ExceptionTranslationFilter@3316aef6, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1bd7dd4a]
2024-03-04 22:41:30,710 INFO [main] org.springframework.boot.StartupInfoLogger: Started FileServiceTest in 1.089 seconds (JVM running for 9.168)
2024-03-04 22:41:30,724 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Find all file in Storage  by userID 1 and limit: 3
2024-03-04 22:41:30,724 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Found all file in Storage  by userID 1 and limit: 3 | List<File>: [FAILED toString()]
2024-03-04 22:41:30,739 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Find file in Storage by file name fileName.txt and ID 1
2024-03-04 22:41:30,746 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Find file in Storage for delete by file name fileName.txt and userID 1
2024-03-04 22:41:30,747 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Delete file from Storage by file name File{id=10, hash='0b28122bac2239a5968bdb1112cae820', fileName='fileName.txt', type='text/plain', size='19', created=2024-03-04T22:41:30.745856100, updated=null, userId=1} and userID 1
2024-03-04 22:41:30,761 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Find file in Storage by file name fileName.txt and ID 1
2024-03-04 22:41:30,761 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Downloaded file: fileName.txt from Storage. UserId: 1
2024-03-04 22:41:30,766 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Find file in Storage for edit by file name fileName.txt and userID 1
2024-03-04 22:41:30,766 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Check new file name in Storage for edit by file name anyName.txt and userID 1
2024-03-04 22:41:30,767 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: File not found in Storage by file name anyName.txt and ID 1
2024-03-04 22:41:30,767 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Editing file name in Storage by file name File{id=10, hash='0b28122bac2239a5968bdb1112cae820', fileName='fileName.txt', type='text/plain', size='19', created=2024-03-04T22:41:30.765860700, updated=null, userId=1} and userID 1
2024-03-04 22:41:30,767 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Edited file name in Storage by file name File{id=10, hash='0b28122bac2239a5968bdb1112cae820', fileName='anyName.txt', type='text/plain', size='19', created=2024-03-04T22:41:30.765860700, updated=2024-03-04T22:41:30.767858200, userId=1} and userID 1
2024-03-04 22:41:30,772 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Find file in Storage by file name fileName.txt and ID 1
2024-03-04 22:41:30,772 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: File not found in Storage by file name fileName.txt and ID 1
2024-03-04 22:41:30,772 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Successful Generate Checksum for fileName: file
2024-03-04 22:41:30,773 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Get fileByte! and Generated check sum file hash:0b28122bac2239a5968bdb1112cae820
2024-03-04 22:41:30,773 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Find file in Storage by userId:1 and hash :0b28122bac2239a5968bdb1112cae820
2024-03-04 22:41:30,773 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Building file: fileName.txt hash: 0b28122bac2239a5968bdb1112cae820 and UserID: 1
2024-03-04 22:41:30,773 INFO [main] ru.netology.skovorodkodiplom.service.Impl.FileServiceImpl: Creating file and save to Storage: File{id=null, hash='0b28122bac2239a5968bdb1112cae820', fileName='fileName.txt', type='text/plain', size='19', created=2024-03-04T22:41:30.773854800, updated=null, userId=1}
2024-03-04 22:41:30,777 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Neither @ContextConfiguration nor @ContextHierarchy found for test class [ru.netology.skovorodkodiplom.service.UserServiceTest], using SpringBootContextLoader
2024-03-04 22:41:30,777 INFO [main] org.springframework.test.context.support.AbstractContextLoader: Could not detect default resource locations for test class [ru.netology.skovorodkodiplom.service.UserServiceTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2024-03-04 22:41:30,778 INFO [main] org.springframework.test.context.support.AnnotationConfigContextLoaderUtils: Could not detect default configuration classes for test class [ru.netology.skovorodkodiplom.service.UserServiceTest]: UserServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-03-04 22:41:30,780 INFO [main] org.springframework.boot.test.context.SpringBootTestContextBootstrapper: Found @SpringBootConfiguration ru.netology.skovorodkodiplom.GalaxyCloudApplication for test class ru.netology.skovorodkodiplom.service.UserServiceTest
2024-03-04 22:41:30,780 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2024-03-04 22:41:30,781 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@112188cc, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@19ad99fa, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@5331be15, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@32a53a59, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@2f5fb329, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5ac88d71, org.springframework.test.context.transaction.TransactionalTestExecutionListener@457512b, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1f3bd40a, org.springframework.test.context.event.EventPublishingTestExecutionListener@4dafea3f, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@531245fe, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@6d7298be, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@2c289a9e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@1ee47336, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@5f18f8a1, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@26d63c94, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@4e42beba, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@73021987]
2024-03-04 22:41:30,794 INFO [main] org.springframework.boot.StartupInfoLogger: Starting UserServiceTest using Java 17.0.8.1 on DESKTOP-FQJHVEU with PID 22428 (started by Семья in C:\Users\Семья\Desktop\Diplom2\Diplom2)
2024-03-04 22:41:30,794 INFO [main] org.springframework.boot.SpringApplication: No active profile set, falling back to 1 default profile: "default"
2024-03-04 22:41:30,905 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Multiple Spring Data modules found, entering strict repository configuration mode
2024-03-04 22:41:30,905 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2024-03-04 22:41:30,912 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport: Spring Data JDBC - Could not safely identify store assignment for repository candidate interface ru.netology.skovorodkodiplom.repository.FileRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-03-04 22:41:30,913 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport: Spring Data JDBC - Could not safely identify store assignment for repository candidate interface ru.netology.skovorodkodiplom.repository.UserRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-03-04 22:41:30,913 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 7 ms. Found 0 JDBC repository interfaces.
2024-03-04 22:41:30,915 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Multiple Spring Data modules found, entering strict repository configuration mode
2024-03-04 22:41:30,916 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-04 22:41:30,929 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 12 ms. Found 2 JPA repository interfaces.
2024-03-04 22:41:31,052 INFO [main] com.zaxxer.hikari.HikariDataSource: HikariPool-4 - Starting...
2024-03-04 22:41:31,076 INFO [main] com.zaxxer.hikari.HikariDataSource: HikariPool-4 - Start completed.
2024-03-04 22:41:31,089 INFO [main] liquibase.logging.core.JavaLogger: Set default schema name to public
2024-03-04 22:41:31,118 INFO [main] liquibase.logging.core.JavaLogger: Successfully acquired change log lock
2024-03-04 22:41:31,125 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221021_1_create_users_table.yaml
2024-03-04 22:41:31,128 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221021_2__create_files_table.yaml
2024-03-04 22:41:31,131 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221025_3__create_user_roles_table.yaml
2024-03-04 22:41:31,134 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221031_4_import_data.sql
2024-03-04 22:41:31,180 INFO [main] liquibase.logging.core.JavaLogger: Reading from public.databasechangelog
2024-03-04 22:41:31,215 INFO [main] liquibase.logging.core.JavaLogger: Successfully released change log lock
2024-03-04 22:41:31,238 INFO [main] org.hibernate.jpa.internal.util.LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-04 22:41:31,241 INFO [main] org.hibernate.dialect.Dialect: HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-03-04 22:41:31,269 INFO [main] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-04 22:41:31,270 INFO [main] org.springframework.orm.jpa.AbstractEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-04 22:41:31,365 WARN [main] org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration: 

Using generated security password: be6bfa95-3168-4c78-b492-b6f1e61998c5

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-03-04 22:41:31,423 WARN [main] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-04 22:41:31,589 INFO [main] org.springframework.security.web.DefaultSecurityFilterChain: Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@19323826, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@57c2bedf, org.springframework.security.web.context.SecurityContextPersistenceFilter@2121d0ed, org.springframework.security.web.header.HeaderWriterFilter@300788d6, org.springframework.web.filter.CorsFilter@76466a5, ru.netology.skovorodkodiplom.security.JwtFilter@5b6b14a6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@13987842, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1f5513df, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@17e77d57, org.springframework.security.web.session.SessionManagementFilter@710959b3, org.springframework.security.web.access.ExceptionTranslationFilter@2432c72c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2dd7a886]
2024-03-04 22:41:31,860 INFO [main] org.springframework.boot.StartupInfoLogger: Started UserServiceTest in 1.077 seconds (JVM running for 10.317)
2024-03-04 22:41:31,867 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Mapped user request: User(id=1, login=test@test.com, password=test1234, created=null, updated=null, roles=[ROLE_USER], fileList=null)
2024-03-04 22:41:32,148 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Updated user by ID: 1 : User(id=1, login=test@test.com, password=$2a$12$HWZWHV5rXTmOsVYLK5IJtOzC/RsetLm3Y5pSJMpAerIr0hcCsBLY6, created=null, updated=2024-03-04T22:41:32.148515900, roles=[ROLE_USER], fileList=null) 
2024-03-04 22:41:32,154 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Find user by Login: test@test.com
2024-03-04 22:41:32,154 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Found user by Login: test@test.com --> User(id=1, login=test@test.com, password=test1234, created=null, updated=null, roles=[ROLE_USER], fileList=null)
2024-03-04 22:41:32,159 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Find user by ID: 1
2024-03-04 22:41:32,159 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Search user in the Storage by ID: 1
2024-03-04 22:41:32,160 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Deleted user by ID: 1
2024-03-04 22:41:32,165 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Mapped user request: User(id=1, login=test@test.com, password=test1234, created=null, updated=null, roles=[ROLE_USER], fileList=null)
2024-03-04 22:41:32,165 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Find user by Login: test@test.com
2024-03-04 22:41:32,431 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Creating new user: User(id=1, login=test@test.com, password=$2a$12$0VhYj/n2Of8df6XAnJYh5eInBtYxv1brO/iNAfz4YNV8X5Tzkc5aG, created=2024-03-04T22:41:32.431480500, updated=null, roles=[ROLE_USER], fileList=null)
2024-03-04 22:41:32,441 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Find user by ID: 1
2024-03-04 22:41:32,441 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Search user in the Storage by ID: 1
2024-03-04 22:41:32,446 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Search user in the Storage by ID: 1
2024-03-04 22:41:32,446 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: User found by ID: 1 : User(id=1, login=test@test.com, password=test1234, created=null, updated=null, roles=[ROLE_USER], fileList=null) in Storage
2024-03-04 22:41:32,451 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Mapped user request: User(id=1, login=test@test.com, password=test1234, created=null, updated=null, roles=[ROLE_USER], fileList=null)
2024-03-04 22:41:32,452 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Find user by Login: test@test.com
2024-03-04 22:41:32,542 INFO [main] org.testcontainers.utility.ImageNameSubstitutor: Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2024-03-04 22:41:32,605 INFO [main] org.testcontainers.dockerclient.DockerClientProviderStrategy: Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2024-03-04 22:41:33,162 INFO [main] org.testcontainers.dockerclient.DockerClientProviderStrategy: Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2024-03-04 22:41:33,164 INFO [main] org.testcontainers.DockerClientFactory: Docker host IP address is localhost
2024-03-04 22:41:33,189 INFO [main] org.testcontainers.DockerClientFactory: Connected to docker: 
  Server Version: 24.0.6
  API Version: 1.43
  Operating System: Docker Desktop
  Total Memory: 7849 MB
2024-03-04 22:41:33,225 INFO [main] org.testcontainers.images.RemoteDockerImage: Pulling docker image: testcontainers/ryuk:0.3.3. Please be patient; this may take some time but only needs to be done once.
2024-03-04 22:41:33,493 INFO [main] org.testcontainers.utility.RegistryAuthLocator: Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2024-03-04 22:41:37,989 INFO [docker-java-stream-256183458] org.testcontainers.images.LoggedPullImageResultCallback: Starting to pull image
2024-03-04 22:41:38,010 INFO [docker-java-stream-256183458] org.testcontainers.images.LoggedPullImageResultCallback: Pulling image layers:  0 pending,  0 downloaded,  0 extracted, (0 bytes/0 bytes)
2024-03-04 22:41:39,455 INFO [docker-java-stream-256183458] org.testcontainers.images.LoggedPullImageResultCallback: Pulling image layers:  2 pending,  1 downloaded,  0 extracted, (299 KB/? MB)
2024-03-04 22:41:39,507 INFO [docker-java-stream-256183458] org.testcontainers.images.LoggedPullImageResultCallback: Pulling image layers:  1 pending,  2 downloaded,  0 extracted, (1 MB/? MB)
2024-03-04 22:41:39,564 INFO [docker-java-stream-256183458] org.testcontainers.images.LoggedPullImageResultCallback: Pulling image layers:  1 pending,  2 downloaded,  1 extracted, (1 MB/? MB)
2024-03-04 22:41:39,660 INFO [docker-java-stream-256183458] org.testcontainers.images.LoggedPullImageResultCallback: Pulling image layers:  1 pending,  2 downloaded,  2 extracted, (2 MB/? MB)
2024-03-04 22:41:39,682 INFO [docker-java-stream-256183458] org.testcontainers.images.LoggedPullImageResultCallback: Pull complete. 3 layers, pulled in 1s (downloaded 2 MB at 2 MB/s)
2024-03-04 22:41:39,710 INFO [main] org.testcontainers.containers.GenericContainer: Creating container for image: testcontainers/ryuk:0.3.3
2024-03-04 22:41:40,215 INFO [main] org.testcontainers.containers.GenericContainer: Container testcontainers/ryuk:0.3.3 is starting: 95487f69a9a652af962617cb9d7481a5ae4c277b9168d1515867adbb8a2e5f11
2024-03-04 22:41:41,422 INFO [main] org.testcontainers.containers.GenericContainer: Container testcontainers/ryuk:0.3.3 started in PT8.2241354S
2024-03-04 22:41:41,427 INFO [main] org.testcontainers.utility.RyukResourceReaper: Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2024-03-04 22:41:41,427 INFO [main] org.testcontainers.DockerClientFactory: Checking the system...
2024-03-04 22:41:41,428 INFO [main] org.testcontainers.DockerClientFactory: ?? Docker server version should be at least 1.6.0
2024-03-04 22:41:41,429 INFO [main] org.testcontainers.containers.GenericContainer: Creating container for image: postgres:14
2024-03-04 22:41:41,462 INFO [main] org.testcontainers.containers.GenericContainer: Container postgres:14 is starting: 942f672b595d6a00c61b204e969ed2c5a4fb5989a34a67d4b578d7025b7ee4b0
2024-03-04 22:41:44,986 INFO [main] org.testcontainers.containers.GenericContainer: Container postgres:14 started in PT3.55681S
2024-03-04 22:41:44,991 INFO [main] org.testcontainers.images.RemoteDockerImage: Pulling docker image: galaxycloudapp:latest. Please be patient; this may take some time but only needs to be done once.
2024-03-04 22:41:47,175 ERROR [docker-java-stream-1213700563] com.github.dockerjava.api.async.ResultCallbackTemplate: Error during callback
com.github.dockerjava.api.exception.NotFoundException: Status 404: {"message":"pull access denied for galaxycloudapp, repository does not exist or may require 'docker login': denied: requested access to the resource is denied"}

	at org.testcontainers.shaded.com.github.dockerjava.core.DefaultInvocationBuilder.execute(DefaultInvocationBuilder.java:241)
	at org.testcontainers.shaded.com.github.dockerjava.core.DefaultInvocationBuilder.lambda$executeAndStream$1(DefaultInvocationBuilder.java:269)
	at java.base/java.lang.Thread.run(Thread.java:833)
2024-03-04 22:41:47,178 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Neither @ContextConfiguration nor @ContextHierarchy found for test class [ru.netology.skovorodkodiplom.testcontainers.GalaxyCloudApplicationContainerTests], using SpringBootContextLoader
2024-03-04 22:41:47,179 INFO [main] org.springframework.test.context.support.AbstractContextLoader: Could not detect default resource locations for test class [ru.netology.skovorodkodiplom.testcontainers.GalaxyCloudApplicationContainerTests]: no resource found for suffixes {-context.xml, Context.groovy}.
2024-03-04 22:41:47,181 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2024-03-04 22:41:47,182 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@4d8decd1, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@55607e6d, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@283693af, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@695dc0e6, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@4b145278, org.springframework.test.context.support.DirtiesContextTestExecutionListener@1d51de61, org.springframework.test.context.transaction.TransactionalTestExecutionListener@1e68d8f, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@6bb37a5, org.springframework.test.context.event.EventPublishingTestExecutionListener@6fd53298, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@7c644bd5, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@495b3b23, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@16023bb2, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@50859a18, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@ee1493e, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@1e73e9e2, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@192b9e35, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@65028252]
2024-03-04 22:41:47,187 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Neither @ContextConfiguration nor @ContextHierarchy found for test class [ru.netology.skovorodkodiplom.testcontainers.PostgresSQLContainerTest], using SpringBootContextLoader
2024-03-04 22:41:47,188 INFO [main] org.springframework.test.context.support.AbstractContextLoader: Could not detect default resource locations for test class [ru.netology.skovorodkodiplom.testcontainers.PostgresSQLContainerTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2024-03-04 22:41:47,190 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2024-03-04 22:41:47,191 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@1d1071bb, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3f7e5f33, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@4a83736a, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@3c06d119, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@2285f28b, org.springframework.test.context.support.DirtiesContextTestExecutionListener@6f4fa62f, org.springframework.test.context.transaction.TransactionalTestExecutionListener@3e06808f, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@3402004f, org.springframework.test.context.event.EventPublishingTestExecutionListener@399ebdee, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@2b720a2c, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@21faf535, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5de993d, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@49e335a5, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@727b65df, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@45e65f8, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@7538033f, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@25a65e20]
2024-03-04 22:41:47,220 INFO [main] org.springframework.boot.StartupInfoLogger: Starting PostgresSQLContainerTest using Java 17.0.8.1 on DESKTOP-FQJHVEU with PID 22428 (started by Семья in C:\Users\Семья\Desktop\Diplom2\Diplom2)
2024-03-04 22:41:47,221 INFO [main] org.springframework.boot.SpringApplication: The following 1 profile is active: "test"
2024-03-04 22:41:47,370 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Multiple Spring Data modules found, entering strict repository configuration mode
2024-03-04 22:41:47,371 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2024-03-04 22:41:47,383 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport: Spring Data JDBC - Could not safely identify store assignment for repository candidate interface ru.netology.skovorodkodiplom.repository.FileRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-03-04 22:41:47,384 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport: Spring Data JDBC - Could not safely identify store assignment for repository candidate interface ru.netology.skovorodkodiplom.repository.UserRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2024-03-04 22:41:47,384 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 12 ms. Found 0 JDBC repository interfaces.
2024-03-04 22:41:47,387 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Multiple Spring Data modules found, entering strict repository configuration mode
2024-03-04 22:41:47,387 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-03-04 22:41:47,401 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 13 ms. Found 2 JPA repository interfaces.
2024-03-04 22:41:47,686 INFO [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat initialized with port(s): 0 (http)
2024-03-04 22:41:47,697 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing ProtocolHandler ["http-nio-auto-1"]
2024-03-04 22:41:47,698 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting service [Tomcat]
2024-03-04 22:41:47,698 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting Servlet engine: [Apache Tomcat/9.0.65]
2024-03-04 22:41:47,822 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing Spring embedded WebApplicationContext
2024-03-04 22:41:47,823 INFO [main] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 600 ms
2024-03-04 22:41:47,934 INFO [main] com.zaxxer.hikari.HikariDataSource: HikariPool-5 - Starting...
2024-03-04 22:41:47,950 INFO [main] com.zaxxer.hikari.HikariDataSource: HikariPool-5 - Start completed.
2024-03-04 22:41:47,962 INFO [main] liquibase.logging.core.JavaLogger: Set default schema name to public
2024-03-04 22:41:47,997 INFO [main] liquibase.logging.core.JavaLogger: Successfully acquired change log lock
2024-03-04 22:41:48,005 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221021_1_create_users_table.yaml
2024-03-04 22:41:48,007 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221021_2__create_files_table.yaml
2024-03-04 22:41:48,010 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221025_3__create_user_roles_table.yaml
2024-03-04 22:41:48,013 INFO [main] liquibase.logging.core.JavaLogger: Reading resource: db/changelog/changeset/v20221031_4_import_data.sql
2024-03-04 22:41:48,070 INFO [main] liquibase.logging.core.JavaLogger: Reading from public.databasechangelog
2024-03-04 22:41:48,111 INFO [main] liquibase.logging.core.JavaLogger: Successfully released change log lock
2024-03-04 22:41:48,143 INFO [main] org.hibernate.jpa.internal.util.LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
2024-03-04 22:41:48,148 INFO [main] org.hibernate.dialect.Dialect: HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-03-04 22:41:48,185 INFO [main] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-03-04 22:41:48,186 INFO [main] org.springframework.orm.jpa.AbstractEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-03-04 22:41:48,328 WARN [main] org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration: 

Using generated security password: 6eaba2e6-4082-4a73-a6d8-93ba92274f46

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-03-04 22:41:48,413 WARN [main] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-03-04 22:41:48,590 INFO [main] org.springframework.security.web.DefaultSecurityFilterChain: Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4b17474d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4279fc70, org.springframework.security.web.context.SecurityContextPersistenceFilter@11bdb62f, org.springframework.security.web.header.HeaderWriterFilter@79242162, org.springframework.web.filter.CorsFilter@6ffd0aa8, ru.netology.skovorodkodiplom.security.JwtFilter@2c9b96af, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4b04b77d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@13f3a04e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1c5f6c2, org.springframework.security.web.session.SessionManagementFilter@24ad3cd0, org.springframework.security.web.access.ExceptionTranslationFilter@64a7c885, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@37eb27a2]
2024-03-04 22:41:48,881 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting ProtocolHandler ["http-nio-auto-1"]
2024-03-04 22:41:48,912 INFO [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat started on port(s): 64577 (http) with context path ''
2024-03-04 22:41:48,915 INFO [main] org.springframework.boot.StartupInfoLogger: Started PostgresSQLContainerTest in 1.72 seconds (JVM running for 27.373)
2024-03-04 22:41:48,924 INFO [main] org.springframework.test.context.transaction.TransactionContext: Began transaction (1) for test context [DefaultTestContext@691ff4fe testClass = PostgresSQLContainerTest, testInstance = ru.netology.skovorodkodiplom.testcontainers.PostgresSQLContainerTest@3d426638, testMethod = WhenCreateUserExpectHttpStatus@PostgresSQLContainerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1b6a9bb9 testClass = PostgresSQLContainerTest, locations = '{}', classes = '{class ru.netology.skovorodkodiplom.GalaxyCloudApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true, server.port=0}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6f44a157, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16eccb2e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6c4980d3, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@12359a82, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6cc558c6, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@50a7bc6e], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> false, 'org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents' -> false]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@7c45bd55]; rollback [true]
2024-03-04 22:41:48,931 INFO [main] ru.netology.skovorodkodiplom.controller.UserController: Creating new user: UserDto(login=test@test.com, password=test1234)
2024-03-04 22:41:48,932 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Mapped user request: User(id=null, login=test@test.com, password=test1234, created=null, updated=null, roles=null, fileList=null)
2024-03-04 22:41:48,932 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Find user by Login: test@test.com
2024-03-04 22:41:49,346 INFO [main] ru.netology.skovorodkodiplom.service.Impl.UserServiceImpl: Creating new user: User(id=null, login=test@test.com, password=$2a$12$fAKsy8A4MSdoFGI8z5fOMuVZd2tgeKtLr1tvKTauTEDv50mXwRKoq, created=2024-03-04T22:41:49.346671100, updated=null, roles=[ROLE_USER], fileList=null)
2024-03-04 22:41:49,394 INFO [main] org.springframework.test.context.transaction.TransactionContext: Rolled back transaction for test: [DefaultTestContext@691ff4fe testClass = PostgresSQLContainerTest, testInstance = ru.netology.skovorodkodiplom.testcontainers.PostgresSQLContainerTest@3d426638, testMethod = WhenCreateUserExpectHttpStatus@PostgresSQLContainerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1b6a9bb9 testClass = PostgresSQLContainerTest, locations = '{}', classes = '{class ru.netology.skovorodkodiplom.GalaxyCloudApplication}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true, server.port=0}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6f44a157, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16eccb2e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6c4980d3, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@12359a82, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6cc558c6, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@50a7bc6e], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> false, 'org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents' -> false]]
2024-03-04 22:41:49,422 INFO [SpringApplicationShutdownHook] org.springframework.orm.jpa.AbstractEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-04 22:41:49,424 INFO [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource: HikariPool-1 - Shutdown initiated...
2024-03-04 22:41:49,429 INFO [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource: HikariPool-1 - Shutdown completed.
2024-03-04 22:41:49,431 INFO [SpringApplicationShutdownHook] org.springframework.orm.jpa.AbstractEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-04 22:41:49,432 INFO [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource: HikariPool-2 - Shutdown initiated...
2024-03-04 22:41:49,439 INFO [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource: HikariPool-2 - Shutdown completed.
2024-03-04 22:41:49,441 INFO [SpringApplicationShutdownHook] org.springframework.orm.jpa.AbstractEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-04 22:41:49,442 INFO [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource: HikariPool-3 - Shutdown initiated...
2024-03-04 22:41:49,448 INFO [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource: HikariPool-3 - Shutdown completed.
2024-03-04 22:41:49,450 INFO [SpringApplicationShutdownHook] org.springframework.orm.jpa.AbstractEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-04 22:41:49,450 INFO [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource: HikariPool-4 - Shutdown initiated...
2024-03-04 22:41:49,455 INFO [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource: HikariPool-4 - Shutdown completed.
2024-03-04 22:41:49,479 INFO [SpringApplicationShutdownHook] org.springframework.orm.jpa.AbstractEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
2024-03-04 22:41:49,479 INFO [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource: HikariPool-5 - Shutdown initiated...
2024-03-04 22:41:49,481 INFO [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource: HikariPool-5 - Shutdown completed.
